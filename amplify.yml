version: 1

frontend:
  phases:
    build:
      commands:
        - mkdir -p ~/.ssh
        - echo "$SSH_PRIVATE_KEY_SDK" | sed 's/\\n/\n/g' > ~/.ssh/id_rsa
        - chmod 600 ~/.ssh/id_rsa
        - ssh-keyscan github.com >> ~/.ssh/known_hosts
        - chmod 400 ~/.ssh/known_hosts
        
        - yarn install
        - yarn run build
  artifacts:
    baseDirectory: dist
    files:
      - '**/*'
  cache:
    paths:
      - node_modules/**/*
